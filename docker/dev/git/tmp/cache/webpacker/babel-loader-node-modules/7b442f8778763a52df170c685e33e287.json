{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\"; //　動作は，Signupコンポーネントと同じ。\n\nexport default {\n  name: \"Signin\",\n  data: function data() {\n    return {\n      email: \"\",\n      password: \"\",\n      error: \"\"\n    };\n  },\n  created: function created() {\n    this.checkSignedIn();\n  },\n  updated: function updated() {\n    this.checkSignedIn();\n  },\n  methods: {\n    signin: function signin() {\n      var _this = this;\n\n      this.$http.plain.post(\"/api/signin\", {\n        email: this.email,\n        password: this.password\n      }).then(function (response) {\n        return _this.signinSuccessful(response);\n      })[\"catch\"](function (error) {\n        return _this.signinFailed(error);\n      });\n    },\n    signinSuccessful: function signinSuccessful(response) {\n      if (!response.data.csrf) {\n        this.signinFailed(response);\n        return;\n      }\n\n      localStorage.csrf = response.data.csrf;\n      localStorage.signedIn = true;\n      this.$store.dispatch(\"doFetchSignedIn\");\n      this.error = \"\";\n      this.$router.replace(\"/\");\n    },\n    signinFailed: function signinFailed(error) {\n      this.error = error.response && error.response.data && error.response.data.error || \"\";\n      delete localStorage.csrf;\n      delete localStorage.signedIn;\n    },\n    checkSignedIn: function checkSignedIn() {\n      if (localStorage.signedIn) {\n        this.$router.replace(\"/\");\n      }\n    }\n  }\n};","map":{"version":3,"sources":["Signin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,OAAA,KAAA,MAAA,OAAA,C,CACA;;AACA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AACA,SAAA,aAAA;AACA,GAXA;AAYA,EAAA,OAZA,qBAYA;AACA,SAAA,aAAA;AACA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,WAAA,KAAA,CAAA,KAAA,CACA,IADA,CACA,aADA,EACA;AAAA,QAAA,KAAA,EAAA,KAAA,KAAA;AAAA,QAAA,QAAA,EAAA,KAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,QAAA;AAAA,eAAA,KAAA,CAAA,gBAAA,CAAA,QAAA,CAAA;AAAA,OAFA,WAGA,UAAA,KAAA;AAAA,eAAA,KAAA,CAAA,YAAA,CAAA,KAAA,CAAA;AAAA,OAHA;AAIA,KANA;AAOA,IAAA,gBAPA,4BAOA,QAPA,EAOA;AACA,UAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,aAAA,YAAA,CAAA,QAAA;AACA;AACA;;AACA,MAAA,YAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,MAAA,YAAA,CAAA,QAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,iBAAA;AACA,WAAA,KAAA,GAAA,EAAA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AACA,KAjBA;AAkBA,IAAA,YAlBA,wBAkBA,KAlBA,EAkBA;AACA,WAAA,KAAA,GACA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,IAAA,IAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA,IACA,EAFA;AAGA,aAAA,YAAA,CAAA,IAAA;AACA,aAAA,YAAA,CAAA,QAAA;AACA,KAxBA;AAyBA,IAAA,aAzBA,2BAyBA;AACA,UAAA,YAAA,CAAA,QAAA,EAAA;AACA,aAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AACA;AACA;AA7BA;AAfA,CAAA","sourcesContent":["<template>\n<div>\n  <header>\n    <nav>\n      <ul>\n        <li>\n          <a>\n            <router-link to=\"/\" class=\"link\">HOME</router-link>\n          </a>\n        </li>\n        <li>\n          <a>\n            <router-link to=\"/menu/new\" class=\"link\">New</router-link>\n          </a>\n        </li>\n        <li>\n          <router-link to=\"/signup\" v-if=\"signedIn\" @click=\"signOut\">Signout</router-link>\n        </li>\n      </ul>\n    </nav>\n  </header>\n\n  <div class=\"login\">\n    <form class=\"col\" @submit.prevent=\"signin\">\n      <div class=\"text-red\" v-if=\"error\">{{ error }}</div>\n\n      <div>\n        <div>\n          <input\n            placeholder=\"Email\"\n            type=\"text\"\n            class=\"validate\"\n            v-model=\"email\"\n            required=\"required\"\n          />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"input-field\">\n          <input\n            placeholder=\"Password\"\n            type=\"text\"\n            class=\"validate\"\n            v-model=\"password\"\n            required=\"required\"\n          />\n        </div>\n      </div>\n\n      <button type=\"submit\" class=\"btn waves-effect waves-light\">Sign In</button>\n      <div>\n        <router-link to=\"/signup\" class=\"btn link-grey\">Sign Up</router-link>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n//　動作は，Signupコンポーネントと同じ。\nexport default {\n  name: \"Signin\",\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      error: \"\"\n    };\n  },\n  created() {\n    this.checkSignedIn();\n  },\n  updated() {\n    this.checkSignedIn();\n  },\n  methods: {\n    signin() {\n      this.$http.plain\n        .post(\"/api/signin\", { email: this.email, password: this.password })\n        .then(response => this.signinSuccessful(response))\n        .catch(error => this.signinFailed(error));\n    },\n    signinSuccessful(response) {\n      if (!response.data.csrf) {\n        this.signinFailed(response);\n        return;\n      }\n      localStorage.csrf = response.data.csrf;\n      localStorage.signedIn = true;\n      this.$store.dispatch(\"doFetchSignedIn\");\n      this.error = \"\";\n      this.$router.replace(\"/\");\n    },\n    signinFailed(error) {\n      this.error =\n        (error.response && error.response.data && error.response.data.error) ||\n        \"\";\n      delete localStorage.csrf;\n      delete localStorage.signedIn;\n    },\n    checkSignedIn() {\n      if (localStorage.signedIn) {\n        this.$router.replace(\"/\");\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.login {\n  margin: auto;\n  padding: 22px 22px 22px 22px;\n  width: 100%;\n  border-radius: 5px;\n  background: #282e33;\n  border-top: 3px solid #434a52;\n  border-bottom: 3px solid #434a52;\n}\ninput {\n  background-color: #3b4148;\n  border-radius: 0px 3px 3px 0px;\n  color: #a9a9a9;\n  margin-bottom: 1em;\n  padding: 0 16px;\n  width: 235px;\n  height: 50px;\n}\n\ninput[type=\"text\"]:focus,\ntextarea:focus {\n  box-shadow: 0 0 7px #1abc9c;\n  border: 1px solid #1abc9c;\n}\n\nbutton {\n  background: #b5cd60;\n  border: 0;\n  width: 100%;\n  height: 40px;\n  border-radius: 3px;\n  color: white;\n  cursor: pointer;\n  /* transition: background 0.3s ease-in-out; */\n}\n\nbutton:hover {\n  background: #16aa56;\n}\n</style>\n"],"sourceRoot":"app/javascript"},"metadata":{},"sourceType":"module"}