{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Signup\",\n  data: function data() {\n    return {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      password_confirmation: \"\",\n      error: \"\"\n    };\n  },\n  created: function created() {\n    this.checkSignedIn();\n  },\n  updated: function updated() {\n    this.checkSignedIn();\n  },\n  methods: {\n    signup: function signup() {\n      var _this = this;\n\n      this.$http.plain.post(\"/api/v1/signup\", {\n        name: this.name,\n        email: this.email,\n        password: this.password,\n        password_confirmation: this.password_confirmation\n      }).then(function (response) {\n        return _this.signupSuccessful(response);\n      })[\"catch\"](function (error) {\n        return _this.signupFailed(error);\n      });\n    },\n    signupSuccessful: function signupSuccessful(response) {\n      if (!response.data.csrf) {\n        this.signupFailed(response);\n        return;\n      }\n\n      localStorage.csrf = response.data.csrf;\n      localStorage.signedIn = true;\n      this.$store.dispatch(\"doFetchSignedIn\");\n      this.error = \"\";\n      this.$router.replace(\"/\");\n    },\n    signupFailed: function signupFailed(error) {\n      this.error = error.response && error.response.data && error.response.data.error || \"Something went wrong\";\n      delete localStorage.csrf;\n      delete localStorage.signedIn;\n    },\n    checkSignedIn: function checkSignedIn() {\n      if (localStorage.signedIn) {\n        this.$router.replace(\"/\");\n      }\n    }\n  }\n};","map":{"version":3,"sources":["Signup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,qBAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,OAXA,qBAWA;AACA,SAAA,aAAA;AACA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,aAAA;AACA,GAhBA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,WAAA,KAAA,CAAA,KAAA,CACA,IADA,CACA,gBADA,EACA;AACA,QAAA,IAAA,EAAA,KAAA,IADA;AAEA,QAAA,KAAA,EAAA,KAAA,KAFA;AAGA,QAAA,QAAA,EAAA,KAAA,QAHA;AAIA,QAAA,qBAAA,EAAA,KAAA;AAJA,OADA,EAOA,IAPA,CAOA,UAAA,QAAA;AAAA,eAAA,KAAA,CAAA,gBAAA,CAAA,QAAA,CAAA;AAAA,OAPA,WAQA,UAAA,KAAA;AAAA,eAAA,KAAA,CAAA,YAAA,CAAA,KAAA,CAAA;AAAA,OARA;AASA,KAXA;AAYA,IAAA,gBAZA,4BAYA,QAZA,EAYA;AACA,UAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,aAAA,YAAA,CAAA,QAAA;AACA;AACA;;AACA,MAAA,YAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,MAAA,YAAA,CAAA,QAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,iBAAA;AACA,WAAA,KAAA,GAAA,EAAA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AACA,KAtBA;AAuBA,IAAA,YAvBA,wBAuBA,KAvBA,EAuBA;AACA,WAAA,KAAA,GACA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,IAAA,IAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA,IACA,sBAFA;AAGA,aAAA,YAAA,CAAA,IAAA;AACA,aAAA,YAAA,CAAA,QAAA;AACA,KA7BA;AA8BA,IAAA,aA9BA,2BA8BA;AACA,UAAA,YAAA,CAAA,QAAA,EAAA;AACA,aAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AACA;AACA;AAlCA;AAjBA,CAAA","sourcesContent":["<template>\n  <div>\n    <header>\n      <nav>\n        <ul>\n          <li>\n            <a>\n              <router-link to=\"/\" class=\"link\">HOME</router-link>\n            </a>\n          </li>\n          <li>\n            <a>\n              <router-link to=\"/signin\" class=\"link\">ログイン</router-link>\n            </a>\n          </li>\n        </ul>\n      </nav>\n    </header>\n\n    <div class=\"form\">\n      <form class=\"col\" @submit.prevent=\"signup\">\n        <div class=\"text-red\" v-if=\"error\">{{ error }}</div>\n        <div class=\"text-input\">\n          <input placeholder=\"Name\" type=\"text\" class=\"validate\" v-model=\"name\" required=\"required\" />\n          <span class=\"separator\"></span>\n        </div>\n\n        <div class=\"text-input\">\n          <input\n            placeholder=\"Email\"\n            type=\"text\"\n            class=\"validate\"\n            v-model=\"email\"\n            required=\"required\"\n          />\n          <span class=\"separator\"></span>\n        </div>\n\n        <div class=\"text-input\">\n          <input\n            placeholder=\"Password\"\n            type=\"text\"\n            class=\"validate\"\n            v-model=\"password\"\n            required=\"required\"\n          />\n          <span class=\"separator\"></span>\n        </div>\n\n        <div class=\"text-input\">\n          <input\n            placeholder=\"Password_confirmation\"\n            type=\"text\"\n            class=\"validate\"\n            v-model=\"password_confirmation\"\n            required=\"required\"\n          />\n          <span class=\"separator\"></span>\n        </div>\n\n        <button type=\"submit\">会員登録</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Signup\",\n  data() {\n    return {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      password_confirmation: \"\",\n      error: \"\"\n    };\n  },\n  created() {\n    this.checkSignedIn();\n  },\n  updated() {\n    this.checkSignedIn();\n  },\n  methods: {\n    signup() {\n      this.$http.plain\n        .post(\"/api/v1/signup\", {\n          name: this.name,\n          email: this.email,\n          password: this.password,\n          password_confirmation: this.password_confirmation\n        })\n        .then(response => this.signupSuccessful(response))\n        .catch(error => this.signupFailed(error));\n    },\n    signupSuccessful(response) {\n      if (!response.data.csrf) {\n        this.signupFailed(response);\n        return;\n      }\n      localStorage.csrf = response.data.csrf;\n      localStorage.signedIn = true;\n      this.$store.dispatch(\"doFetchSignedIn\");\n      this.error = \"\";\n      this.$router.replace(\"/\");\n    },\n    signupFailed(error) {\n      this.error =\n        (error.response && error.response.data && error.response.data.error) ||\n        \"Something went wrong\";\n      delete localStorage.csrf;\n      delete localStorage.signedIn;\n    },\n    checkSignedIn() {\n      if (localStorage.signedIn) {\n        this.$router.replace(\"/\");\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\nnav ul {\n  display: table;\n  width: 100%;\n  text-align: center;\n  border-collapse: collapse;\n  border-spacing: 0;\n  justify-content: space-between;\n}\nnav ul li {\n  display: table-cell;\n  min-width: 50px;\n  border-right: 1px solid #ccc;\n  border-bottom: 5px solid #ccc;\n}\n\nnav ul li a {\n  display: block;\n  width: 100%;\n  padding: 10px 0;\n  text-decoration: none;\n  color: #aaa;\n}\nnav ul li a:hover {\n  color: black;\n}\n\n.form {\n  width: 400px;\n  margin: 0 auto;\n  text-align: left;\n  margin-top: 10em;\n}\n\n.form form .text-input {\n  overflow: hidden;\n  margin-bottom: 0.875em;\n}\n\n.form form input {\n  width: 100%;\n  padding: 1em 0 12px;\n  padding-left: 0;\n  background: none;\n  color: black;\n  font-size: 1.2em;\n  font-weight: 400;\n  border: none;\n  border-bottom: 1px solid #999;\n}\n\n.form form input:focus + .separator {\n  transform: scaleX(1) translateY(-2px);\n  opacity: 1;\n}\n\n.separator {\n  height: 3px;\n  width: 100%;\n  background: #3599ff;\n  display: block;\n  transform: scaleX(0) translateY(-2px);\n  transform-origin: 50%;\n  opacity: 0;\n  transition: all 0.15s linear;\n}\n\n.separator:focus {\n  outline-color: transparent;\n  outline-style: none;\n}\n\n.form form button {\n  background: #b5cd60;\n  border: 0;\n  width: 100%;\n  height: 40px;\n  border-radius: 3px;\n  color: white;\n  cursor: pointer;\n  /* transition: background 0.3s ease-in-out; */\n}\n\n.form form button:hover {\n  background: #16aa56;\n}\n</style>\n"],"sourceRoot":"app/javascript"},"metadata":{},"sourceType":"module"}